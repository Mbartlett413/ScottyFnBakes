

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-6 col-md-6 col-lg-6 borderMe">
      <h1> Date: <%= @day.this_date.strftime("%m/%d/%Y") %></h1>
      <h6> Openings: <%= @day.avaliable_spots %></h6>
    </div>
  </div>
<p id="notice"><%= notice %></p>
  <div class="row formsection">
    <div class="col-sm-12 col-md-12 col-lg-12">
        <% if @day.closed == true || @day.avaliable_spots == 0 %>
          <h3 style="color: red; text-align: center;">No Loaf For You Today. Try Tomorrow!</h3>
        <% else %> 


        <div class="form-group">
          <label for="guestName">Name:</label>
          <input type="email" class="form-control" id="guestName" placeholder="Jon Dough" required >
        </div>

        <div class="form-group">
          <label for="guestNumber">Number:</label>
          <input type="tel" class="form-control" id="guestNumber" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="555-555-5555" required>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="call_pref" value="option1">
          <label class="form-check-label" for="call_pref">Calls are cool</label>
        </div>

        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="text_pref" value="option2">
          <label class="form-check-label" for="text_pref">Text are cool</label>
        </div> 

        <div class="form-group">
          <label for="guestEmail">Email:</label>
          <input type="email" class="form-control" id="guestEmail" placeholder="JonDough@Bread.com" required>
        </div>

          <div class="form-group">
            <label for="order_notes">Notes, Special Request, Etc...</label>
            <input type="textarea" class="form-control" id="order_notes" placeholder="I Love Bread" required>
          </div>

          <div class="form-group">
            <label for="pickupTime">Pickup Time</label>
            <select multiple class="form-control" id="pickupTime">
              <option>9AM-12PM</option>
              <option>12PM-3PM</option>
              <option>3PM-6PM</option>
              <option>6PM-9PM</option>
            </select>
          </div>


    </div>    

      <div class="col-sm-12 col-md-12 col-lg-12">
        <table class="table">
          <thead>
            <tr>
              <th class="text-white"> Type: </th>
              <th class="text-white"> Quantity: </th>
            </tr>
          </thead>

          <tbody id="tableToMod">
              <tr id="rowToClone">
                <td id ="loafSelection" class="loafType" > <%= collection_select(:name, :loaf_id, @loafs, :id, :name, {:prompt => true}, class: 'form-control') %></td>
                <td class="loafQuantity" > <input type="" name="" class="form-control"> </td> 
              </tr>
          </tbody>
        </table>
        <button id="submitOrder" type="button" class="btn btn-primary btn-block" disabled="true" >Get This Bread</button>

        <button id="add_row" type="button" onclick="cloneRowMethod()" class="btn btn-warning btn-block">More Bread</button>

      <% end %>
        <hr>
      </div>
  </div>


    <p id="orderDate" style="display: none;"> <%= @day.this_date.strftime("%Y-%m-%d") %></p>
  </div>
  
</div>

<script type="text/javascript">

	function cloneRowMethod(){
		var table = document.getElementById('tableToMod')
		var row = document.getElementById('rowToClone')
	    var cloneRow = row.cloneNode(true)
		cloneRow.id = "newID"
		table.appendChild(cloneRow);
	}

  var orderBtn = document.getElementById('submitOrder');
  var guestName = document.getElementById('guestName');
  var guestNumber = document.getElementById('guestNumber'); 
  var loafSelection = document.getElementById('loafSelection')

  loafSelection.addEventListener('change', function(e){
    console.log("here", e.srcElement.options[e.srcElement.selectedIndex].text)
    if(e.srcElement.options[e.srcElement.selectedIndex].text == 'Sourdough'){
      alert("Sourdough takes at least 3 Days!!!")
    }

  })



  guestName.addEventListener("keyup", function(){
    orderBtn.disabled = false;
  })

</script>